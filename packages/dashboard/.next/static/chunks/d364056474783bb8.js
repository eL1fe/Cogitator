(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19057,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return l}});let l=e=>{}},65482,e=>{"use strict";var t=e.i(61616),a=e.i(40390);function l({className:e,variant:l="default",...r}){return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse bg-bg-elevated",{"rounded-lg":"default"===l,"rounded-full":"circular"===l,"rounded h-4":"text"===l},e),...r})}e.s(["Skeleton",()=>l])},3526,e=>{"use strict";let t=(0,e.i(66310).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],3526)},3355,e=>{"use strict";let t=(0,e.i(66310).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],3355)},96469,e=>{"use strict";let t=(0,e.i(66310).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],96469)},28229,e=>{"use strict";let t=(0,e.i(66310).default)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);e.s(["Server",()=>t],28229)},25192,e=>{"use strict";let t=(0,e.i(66310).default)("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);e.s(["Cloud",()=>t],25192)},95512,e=>{"use strict";var t=e.i(61616),a=e.i(16727),l=e.i(15166),r=e.i(52910),s=e.i(79852),i=e.i(1468),n=e.i(65482),c=e.i(40390),d=e.i(66310);let o=(0,d.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var x=e.i(14845);let m=(0,d.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var h=e.i(75177);let u=(0,d.default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var p=e.i(3526),f=e.i(96469),b=e.i(3355),j=e.i(28229),y=e.i(25192);let v=[{id:"calculator",name:"Calculator",description:"Math calculations"},{id:"datetime",name:"Date/Time",description:"Current time"},{id:"http",name:"HTTP Request",description:"Fetch URLs"},{id:"exec",name:"Shell Command",description:"Run commands"}];function g(){let[e,d]=(0,a.useState)([]),[g,N]=(0,a.useState)(""),[w,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)([]),[T,A]=(0,a.useState)(null),[R,E]=(0,a.useState)(v.map(e=>({...e,enabled:!1}))),[O,P]=(0,a.useState)(.7),[M,B]=(0,a.useState)(!0),[_,q]=(0,a.useState)(null),D=(0,a.useRef)(null),z=(0,a.useRef)(null);(0,a.useEffect)(()=>{D.current?.scrollIntoView({behavior:"smooth"})},[e]),(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/models");if(!e.ok)throw Error("Failed to fetch models");let t=await e.json(),a=[];if(t.ollama.available)for(let e of t.ollama.models)a.push({id:e.name,name:e.displayName,provider:"ollama",available:!0});for(let e of t.cloud){let t=e.id;for(let l of e.models)a.push({id:l,name:l,provider:t,available:e.configured})}S(a);let l=a.find(e=>e.available);l&&A(l)}catch(e){console.error("Failed to fetch models:",e),q("Failed to load models. Is Ollama running?")}finally{B(!1)}}()},[]);let F=async()=>{if(!g.trim()||w||!T)return;let t={id:`msg_${Date.now()}`,role:"user",content:g,timestamp:new Date};d(e=>[...e,t]),N(""),k(!0),q(null);let a=`msg_${Date.now()+1}`;d(e=>[...e,{id:a,role:"assistant",content:"",timestamp:new Date}]);try{z.current=new AbortController;let t=e.map(e=>({role:e.role,content:e.content}));t.push({role:"user",content:g});let l=await fetch("/api/playground",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:T.id,messages:t,temperature:O,tools:R.filter(e=>e.enabled).map(e=>e.id)}),signal:z.current.signal});if(!l.ok){let e=await l.json();throw Error(e.error||"Request failed")}if(!l.body)throw Error("No response body");let r=l.body.getReader(),s=new TextDecoder,i="",n=0;for(;;){let{done:e,value:t}=await r.read();if(e)break;for(let e of s.decode(t).split("\n").filter(Boolean))if(e.startsWith("data: "))try{let t=JSON.parse(e.slice(6));if(t.error)throw Error(t.error);t.content&&(i+=t.content,d(e=>e.map(e=>e.id===a?{...e,content:i}:e))),t.eval_count&&(n=t.eval_count+(t.prompt_eval_count||0))}catch(e){if(e instanceof SyntaxError)continue;throw e}}d(e=>e.map(e=>e.id===a?{...e,tokens:n||void 0}:e))}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;console.error("Chat error:",e),q(e instanceof Error?e.message:"Failed to get response"),d(e=>e.filter(e=>e.id!==a||e.content))}finally{k(!1),z.current=null}},H=C.filter(e=>"ollama"===e.provider&&e.available),I=C.filter(e=>"ollama"!==e.provider);return(0,t.jsxs)("div",{className:"h-full flex",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"flex-1 overflow-auto p-6",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[_&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-error/10 border border-error/20 rounded-lg text-error",children:[(0,t.jsx)(b.AlertCircle,{className:"w-5 h-5 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-sm",children:_})]}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)(x.Bot,{className:"w-12 h-12 text-accent mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Agent Playground"}),(0,t.jsx)("p",{className:"text-text-secondary max-w-md mx-auto",children:T?`Ready to chat with ${T.name}`:"Select a model from the sidebar to get started"})]}):e.map(e=>(0,t.jsxs)("div",{className:(0,c.cn)("flex gap-4 animate-fade-in","user"===e.role&&"flex-row-reverse"),children:[(0,t.jsx)("div",{className:(0,c.cn)("w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0","user"===e.role?"bg-chart-2/10":"tool"===e.role?"bg-chart-4/10":"bg-accent/10"),children:"user"===e.role?(0,t.jsx)(m,{className:"w-4 h-4 text-chart-2"}):"tool"===e.role?(0,t.jsx)(u,{className:"w-4 h-4 text-chart-4"}):(0,t.jsx)(x.Bot,{className:"w-4 h-4 text-accent"})}),(0,t.jsxs)("div",{className:(0,c.cn)("flex-1 max-w-[80%]","user"===e.role&&"text-right"),children:[e.toolName&&(0,t.jsx)(s.Badge,{variant:"outline",size:"sm",className:"mb-2",children:e.toolName}),(0,t.jsx)("div",{className:(0,c.cn)("rounded-xl p-4","user"===e.role?"bg-chart-2/10 text-text-primary inline-block":"bg-bg-secondary border border-border-subtle"),children:(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content||(0,t.jsx)("span",{className:"text-text-muted italic",children:"Generating..."})})}),e.tokens&&(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-text-muted",children:[(0,t.jsx)(p.Zap,{className:"w-3 h-3"}),e.tokens," tokens"]})]})]},e.id)),(0,t.jsx)("div",{ref:D})]})}),(0,t.jsx)("div",{className:"border-t border-border-subtle p-4 bg-bg-secondary",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto flex gap-3",children:[(0,t.jsx)(i.Input,{placeholder:T?"Type a message...":"Select a model first...",value:g,onChange:e=>N(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&F(),className:"flex-1",disabled:!T}),w?(0,t.jsx)(r.Button,{variant:"danger",onClick:()=>{z.current&&z.current.abort()},children:"Stop"}):(0,t.jsx)(r.Button,{variant:"primary",onClick:F,disabled:!g.trim()||!T,children:(0,t.jsx)(o,{className:"w-4 h-4"})})]})})]}),(0,t.jsxs)("div",{className:"w-80 border-l border-border-subtle bg-bg-secondary p-4 space-y-6 overflow-auto",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Settings,{className:"w-4 h-4"}),"Model"]})}),M?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Skeleton,{className:"h-14 w-full"}),(0,t.jsx)(n.Skeleton,{className:"h-14 w-full"}),(0,t.jsx)(n.Skeleton,{className:"h-14 w-full"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[H.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-xs text-text-muted",children:[(0,t.jsx)(j.Server,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"Local (Ollama)"})]}),(0,t.jsx)("div",{className:"space-y-1",children:H.map(e=>(0,t.jsx)("button",{onClick:()=>A(e),className:(0,c.cn)("w-full p-2 rounded-lg text-left transition-colors text-sm",T?.id===e.id?"bg-accent/10 border border-accent":"bg-bg-elevated hover:bg-bg-hover border border-transparent"),children:e.name},e.id))})]}),I.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-xs text-text-muted",children:[(0,t.jsx)(y.Cloud,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"Cloud"})]}),(0,t.jsx)("div",{className:"space-y-1",children:I.map(e=>(0,t.jsxs)("button",{onClick:()=>e.available&&A(e),disabled:!e.available,className:(0,c.cn)("w-full p-2 rounded-lg text-left transition-colors text-sm",T?.id===e.id?"bg-accent/10 border border-accent":e.available?"bg-bg-elevated hover:bg-bg-hover border border-transparent":"bg-bg-elevated border border-transparent opacity-50 cursor-not-allowed"),children:[(0,t.jsx)("span",{children:e.id}),!e.available&&(0,t.jsx)("span",{className:"text-xs text-error ml-2",children:"(no API key)"})]},e.id))})]}),0===C.length&&(0,t.jsxs)("div",{className:"text-center py-4 text-text-muted text-sm",children:[(0,t.jsx)(b.AlertCircle,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No models available"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"Start Ollama or configure API keys"})]})]})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{children:"Temperature"}),(0,t.jsx)("span",{className:"text-sm text-accent",children:O})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"2",step:"0.1",value:O,onChange:e=>P(parseFloat(e.target.value)),className:"w-full accent-accent"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-text-muted mt-1",children:[(0,t.jsx)("span",{children:"Precise"}),(0,t.jsx)("span",{children:"Creative"})]})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{className:"w-4 h-4"}),"Tools"]})}),(0,t.jsx)("div",{className:"space-y-2",children:R.map(e=>(0,t.jsxs)("label",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-bg-hover cursor-pointer",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-text-primary",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-text-muted",children:e.description})]}),(0,t.jsx)("input",{type:"checkbox",checked:e.enabled,onChange:()=>{var t;return t=e.id,void E(e=>e.map(e=>e.id===t?{...e,enabled:!e.enabled}:e))},className:"w-4 h-4 accent-accent"})]},e.id))})]}),(0,t.jsxs)(r.Button,{variant:"outline",className:"w-full gap-2",onClick:()=>{d([]),q(null)},children:[(0,t.jsx)(f.RotateCcw,{className:"w-4 h-4"}),"Clear Chat"]})]})]})}e.s(["PlaygroundChat",()=>g],95512)}]);